---
/**
 * Journeys Index Page
 *
 * Gallery page showing all available product journeys. Each journey
 * demonstrates a real workflow step-by-step with screenshots.
 *
 * Feature Slice 18: Journeys Index Page
 */
import PageLayout from '@/layouts/PageLayout.astro';
import Section from '@/components/ui/Section.astro';
import Container from '@/components/ui/Container.astro';
import Card from '@/components/ui/Card.astro';
import Button from '@/components/ui/Button.astro';

// Journey data - will be replaced with content collection in Feature Slice 19
const journeys = [
  {
    slug: 'create-workspace',
    title: 'Create Workspace',
    jtbd: 'When I start a new AI research project, I want to create a dedicated workspace so that I can organize my sources and conversations.',
    description: 'Set up a new workspace for your AI research project with custom settings and blueprint selections.',
    category: 'Getting Started',
    steps: 4,
    estimatedTime: '2 minutes',
    icon: 'folder-plus',
  },
  {
    slug: 'switch-workspace',
    title: 'Switch Workspace',
    jtbd: 'When I need to work on a different project, I want to quickly switch workspaces so that I can access the right sources and context.',
    description: 'Seamlessly switch between different research projects while maintaining context and conversation history.',
    category: 'Getting Started',
    steps: 3,
    estimatedTime: '30 seconds',
    icon: 'arrows-right-left',
  },
  {
    slug: 'configure-settings',
    title: 'Configure Settings',
    jtbd: 'When I want to customize my research experience, I want to adjust settings so that Lattice works the way I prefer.',
    description: 'Customize your Lattice experience with theme preferences, AI model selection, and output formatting options.',
    category: 'Configuration',
    steps: 5,
    estimatedTime: '3 minutes',
    icon: 'settings',
  },
  {
    slug: 'manage-api-keys',
    title: 'Manage API Keys',
    jtbd: 'When I need to connect to AI providers, I want to securely manage my API keys so that I can use my own accounts.',
    description: 'Add, update, and manage API keys for various AI providers including OpenAI, Anthropic, and more.',
    category: 'Configuration',
    steps: 4,
    estimatedTime: '2 minutes',
    icon: 'key',
  },
  {
    slug: 'browse-blueprints',
    title: 'Browse Blueprints',
    jtbd: 'When I want to research a specific vendor, I want to browse available blueprints so that I can quickly add relevant sources.',
    description: 'Explore the blueprint gallery to find pre-configured source bundles for major AI vendors and frameworks.',
    category: 'Sources',
    steps: 3,
    estimatedTime: '1 minute',
    icon: 'grid',
  },
  {
    slug: 'apply-blueprint',
    title: 'Apply Blueprint',
    jtbd: 'When I find a relevant blueprint, I want to apply it to my workspace so that I can immediately start researching.',
    description: 'Apply a blueprint to your workspace to instantly add curated sources for a specific vendor or topic.',
    category: 'Sources',
    steps: 4,
    estimatedTime: '1 minute',
    icon: 'download',
  },
];

// Group journeys by category
const categories = [...new Set(journeys.map((j) => j.category))];

// Icon SVG paths
const iconPaths: Record<string, string> = {
  'folder-plus': 'M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z',
  'arrows-right-left': 'M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4',
  'settings': 'M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z',
  'key': 'M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z',
  'grid': 'M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z',
  'download': 'M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4',
};
---

<PageLayout
  title="Product Journeys - Lattice Lab"
  description="Explore step-by-step product journeys showing real Lattice Lab workflows. From creating workspaces to applying blueprints, see exactly how Lattice works."
>
  <!-- Hero Section -->
  <Section spacing="lg" background="default" data-testid="journeys-hero">
    <Container size="lg">
      <div class="mx-auto max-w-3xl text-center">
        <span
          class="mb-4 inline-block rounded-full bg-accent/10 px-4 py-1.5 text-sm font-medium text-accent"
          data-testid="journeys-eyebrow"
        >
          Product Journeys
        </span>
        <h1
          class="mb-6 text-4xl font-bold tracking-tight text-foreground sm:text-5xl"
          data-testid="journeys-headline"
        >
          See Lattice in Action
        </h1>
        <p
          class="text-xl text-muted-foreground"
          data-testid="journeys-subhead"
        >
          Step-by-step walkthroughs showing exactly how to accomplish common tasks. Each journey includes screenshots and explanations.
        </p>
      </div>
    </Container>
  </Section>

  <!-- Journey Categories -->
  {categories.map((category, categoryIndex) => (
    <Section
      spacing="lg"
      background={categoryIndex % 2 === 0 ? 'muted' : 'default'}
      data-testid={`journeys-category-${categoryIndex}`}
    >
      <Container size="lg">
        <div class="mb-8">
          <h2
            class="text-2xl font-bold tracking-tight text-foreground"
            data-testid={`journeys-category-${categoryIndex}-title`}
          >
            {category}
          </h2>
          <p class="mt-2 text-muted-foreground">
            {category === 'Getting Started' && 'Essential workflows to get up and running with Lattice Lab.'}
            {category === 'Configuration' && 'Customize your Lattice experience with these configuration guides.'}
            {category === 'Sources' && 'Learn how to manage and organize your research sources.'}
          </p>
        </div>

        <div
          class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"
          data-testid={`journeys-category-${categoryIndex}-grid`}
        >
          {journeys
            .filter((j) => j.category === category)
            .map((journey, journeyIndex) => {
              const globalIndex = journeys.findIndex((j) => j.slug === journey.slug);
              return (
                <Card
                  padding="md"
                  class="group relative flex flex-col transition-all hover:shadow-lg"
                  data-testid={`journey-card-${globalIndex}`}
                >
                  {/* Thumbnail placeholder */}
                  <div
                    class="mb-4 aspect-video overflow-hidden rounded-lg bg-surface-2 flex items-center justify-center"
                    data-testid={`journey-card-${globalIndex}-thumbnail`}
                  >
                    <svg
                      class="h-12 w-12 text-muted-foreground/30"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      aria-hidden="true"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1.5"
                        d={iconPaths[journey.icon]}
                      />
                    </svg>
                  </div>

                  {/* Journey metadata */}
                  <div class="mb-2 flex items-center gap-3 text-xs text-muted-foreground">
                    <span class="flex items-center gap-1" data-testid={`journey-card-${globalIndex}-steps`}>
                      <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                      </svg>
                      {journey.steps} steps
                    </span>
                    <span class="flex items-center gap-1" data-testid={`journey-card-${globalIndex}-time`}>
                      <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      {journey.estimatedTime}
                    </span>
                  </div>

                  {/* Journey title */}
                  <h3
                    class="mb-2 text-lg font-semibold text-foreground"
                    data-testid={`journey-card-${globalIndex}-title`}
                  >
                    {journey.title}
                  </h3>

                  {/* Journey description */}
                  <p
                    class="mb-4 flex-1 text-sm text-muted-foreground"
                    data-testid={`journey-card-${globalIndex}-description`}
                  >
                    {journey.description}
                  </p>

                  {/* JTBD statement */}
                  <div
                    class="mb-4 rounded-lg bg-surface-2 p-3 text-xs italic text-muted-foreground"
                    data-testid={`journey-card-${globalIndex}-jtbd`}
                  >
                    "{journey.jtbd}"
                  </div>

                  {/* View journey link */}
                  <a
                    href={`/journeys/${journey.slug}`}
                    class="inline-flex items-center gap-2 text-sm font-medium text-accent transition-colors hover:text-accent/80"
                    data-testid={`journey-card-${globalIndex}-link`}
                  >
                    View journey
                    <svg
                      class="h-4 w-4 transition-transform group-hover:translate-x-1"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      aria-hidden="true"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5l7 7-7 7"
                      />
                    </svg>
                  </a>
                </Card>
              );
            })}
        </div>
      </Container>
    </Section>
  ))}

  <!-- Summary Section -->
  <Section spacing="lg" background="default" data-testid="journeys-summary">
    <Container size="lg">
      <div class="mx-auto max-w-4xl">
        <div class="grid gap-8 sm:grid-cols-3 text-center" data-testid="journeys-summary-grid">
          <div data-testid="journeys-summary-stat-0">
            <div class="text-4xl font-bold text-accent" data-testid="journeys-summary-stat-0-value">
              {journeys.length}
            </div>
            <div class="mt-1 text-sm text-muted-foreground" data-testid="journeys-summary-stat-0-label">
              Product Journeys
            </div>
          </div>
          <div data-testid="journeys-summary-stat-1">
            <div class="text-4xl font-bold text-accent" data-testid="journeys-summary-stat-1-value">
              {journeys.reduce((acc, j) => acc + j.steps, 0)}
            </div>
            <div class="mt-1 text-sm text-muted-foreground" data-testid="journeys-summary-stat-1-label">
              Total Steps
            </div>
          </div>
          <div data-testid="journeys-summary-stat-2">
            <div class="text-4xl font-bold text-accent" data-testid="journeys-summary-stat-2-value">
              {categories.length}
            </div>
            <div class="mt-1 text-sm text-muted-foreground" data-testid="journeys-summary-stat-2-label">
              Categories
            </div>
          </div>
        </div>
      </div>
    </Container>
  </Section>

  <!-- CTA Section -->
  <Section spacing="lg" background="muted" data-testid="journeys-cta">
    <Container size="md">
      <div class="text-center">
        <h2
          class="mb-4 text-2xl font-bold tracking-tight text-foreground sm:text-3xl"
          data-testid="journeys-cta-headline"
        >
          Ready to Start Your Journey?
        </h2>
        <p
          class="mb-8 text-lg text-muted-foreground"
          data-testid="journeys-cta-subhead"
        >
          Get lifetime access to Lattice Lab and follow these journeys in your own workspace.
        </p>
        <div class="flex flex-col items-center gap-4 sm:flex-row sm:justify-center" data-testid="journeys-cta-buttons">
          <Button
            variant="primary"
            size="lg"
            href="/pricing"
            class="w-full px-8 sm:w-auto"
            data-testid="journeys-cta-primary"
          >
            Get Lattice for $99
          </Button>
          <Button
            variant="secondary"
            size="lg"
            href="/features"
            class="w-full px-8 sm:w-auto"
            data-testid="journeys-cta-secondary"
          >
            Explore Features
          </Button>
        </div>
        <p class="mt-6 text-sm text-muted-foreground" data-testid="journeys-cta-trust">
          30-day money-back guarantee. Self-hosted for privacy.
        </p>
      </div>
    </Container>
  </Section>
</PageLayout>
