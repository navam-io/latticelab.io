---
/**
 * StickyNav test page
 * Tests the sticky sub-navigation component for feature pages
 */
import Layout from '../../layouts/Layout.astro';
import StickyNav from '../../components/features/StickyNav.vue';

// Define custom nav items for testing
const customNavItems = [
  { id: 'vendors', label: 'Vendors' },
  { id: 'categories', label: 'Categories' },
  { id: 'setup', label: 'Quick Setup' },
  { id: 'customization', label: 'Customization' }
];

const mobileNavItems = [
  { id: 'intro', label: 'Introduction' },
  { id: 'features', label: 'Features' },
  { id: 'benefits', label: 'Benefits' },
  { id: 'pricing', label: 'Pricing' },
  { id: 'comparison', label: 'Comparison' },
  { id: 'faq', label: 'FAQ' }
];
---

<Layout title="StickyNav Test - Lattice">
  <!-- Simulated Header -->
  <header class="sticky top-0 z-50 h-16 bg-white border-b flex items-center px-4" data-testid="test-header">
    <span class="font-bold text-lg">Lattice Header</span>
  </header>

  <main>
    <!-- Hero Section (to scroll past) -->
    <section class="h-[400px] bg-gradient-to-br from-violet-900 to-indigo-900 flex items-center justify-center" data-testid="hero-section">
      <div class="text-center text-white">
        <h1 class="text-4xl font-bold mb-4">Feature Hero Section</h1>
        <p class="text-xl opacity-80">Scroll down to see StickyNav behavior</p>
      </div>
    </section>

    <!-- Default StickyNav -->
    <StickyNav
      client:load
      featureName="Sources"
      testId="sticky-nav-default"
    />

    <!-- Overview Section -->
    <section id="overview" class="min-h-[600px] py-20 bg-white" data-testid="section-overview">
      <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold mb-6">Overview</h2>
        <p class="text-gray-600 max-w-3xl">
          This is the overview section. When you scroll here, the "Overview" link in the sticky nav should be highlighted.
          The StickyNav component provides sub-navigation for feature pages with smooth scroll and active state tracking.
        </p>
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="p-6 bg-gray-50 rounded-xl">
            <h3 class="font-semibold mb-2">Feature 1</h3>
            <p class="text-gray-600 text-sm">Description of feature 1 goes here with details.</p>
          </div>
          <div class="p-6 bg-gray-50 rounded-xl">
            <h3 class="font-semibold mb-2">Feature 2</h3>
            <p class="text-gray-600 text-sm">Description of feature 2 goes here with details.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Capabilities Section -->
    <section id="capabilities" class="min-h-[600px] py-20 bg-gray-50" data-testid="section-capabilities">
      <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold mb-6">Capabilities</h2>
        <p class="text-gray-600 max-w-3xl">
          This is the capabilities section. Scroll here to see the "Capabilities" link become active.
        </p>
        <ul class="mt-8 space-y-4 max-w-2xl">
          <li class="flex items-start gap-3">
            <span class="w-6 h-6 bg-violet-100 rounded-full flex items-center justify-center text-violet-600 flex-shrink-0">1</span>
            <span class="text-gray-700">First capability with detailed explanation of what it does.</span>
          </li>
          <li class="flex items-start gap-3">
            <span class="w-6 h-6 bg-violet-100 rounded-full flex items-center justify-center text-violet-600 flex-shrink-0">2</span>
            <span class="text-gray-700">Second capability with detailed explanation of what it does.</span>
          </li>
          <li class="flex items-start gap-3">
            <span class="w-6 h-6 bg-violet-100 rounded-full flex items-center justify-center text-violet-600 flex-shrink-0">3</span>
            <span class="text-gray-700">Third capability with detailed explanation of what it does.</span>
          </li>
        </ul>
      </div>
    </section>

    <!-- Use Cases Section -->
    <section id="use-cases" class="min-h-[600px] py-20 bg-white" data-testid="section-use-cases">
      <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold mb-6">Use Cases</h2>
        <p class="text-gray-600 max-w-3xl">
          This is the use cases section. The "Use Cases" link should be active when viewing this section.
        </p>
        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="p-6 border rounded-xl">
            <h3 class="font-semibold mb-2">Use Case 1</h3>
            <p class="text-gray-600 text-sm">Description of use case 1.</p>
          </div>
          <div class="p-6 border rounded-xl">
            <h3 class="font-semibold mb-2">Use Case 2</h3>
            <p class="text-gray-600 text-sm">Description of use case 2.</p>
          </div>
          <div class="p-6 border rounded-xl">
            <h3 class="font-semibold mb-2">Use Case 3</h3>
            <p class="text-gray-600 text-sm">Description of use case 3.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Custom Nav Items Test -->
    <section class="py-20 bg-gray-100" data-testid="custom-nav-section">
      <div class="container mx-auto px-4">
        <h2 class="text-2xl font-bold mb-6">Custom Nav Items Test</h2>
        <p class="text-gray-600 mb-8">This section shows a StickyNav with custom navigation items.</p>

        <div class="border rounded-xl overflow-hidden bg-white">
          <div class="relative">
            <StickyNav
              client:load
              featureName="Blueprints"
              navItems={customNavItems}
              buyButtonText="Get Started"
              buyButtonHref="/#pricing"
              testId="sticky-nav-custom"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- No Buy Button Test -->
    <section class="py-20 bg-white" data-testid="no-buy-section">
      <div class="container mx-auto px-4">
        <h2 class="text-2xl font-bold mb-6">No Buy Button Test</h2>
        <p class="text-gray-600 mb-8">StickyNav without buy button.</p>

        <div class="border rounded-xl overflow-hidden bg-white">
          <StickyNav
            client:load
            featureName="Settings"
            showBuyButton={false}
            testId="sticky-nav-no-buy"
          />
        </div>
      </div>
    </section>

    <!-- Mobile Scroll Test -->
    <section class="py-20 bg-gray-50" data-testid="mobile-test-section">
      <div class="container mx-auto px-4">
        <h2 class="text-2xl font-bold mb-6">Mobile Horizontal Scroll Test</h2>
        <p class="text-gray-600 mb-8">StickyNav with many items to test horizontal scrolling on mobile.</p>

        <div class="border rounded-xl overflow-hidden bg-white">
          <StickyNav
            client:load
            featureName="Full Feature"
            navItems={mobileNavItems}
            testId="sticky-nav-mobile"
          />
        </div>
      </div>
    </section>

    <!-- Extra content to enable scrolling -->
    <section class="h-[400px] bg-gray-100 flex items-center justify-center">
      <p class="text-gray-500">End of page content</p>
    </section>
  </main>
</Layout>
