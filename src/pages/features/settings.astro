---
import Layout from '@layouts/Layout.astro';
import Header from '@components/Header.vue';
import Footer from '@components/Footer.vue';
import StickyNav from '@components/features/StickyNav.vue';
import FeatureHero from '@components/features/FeatureHero.vue';
import CapabilitySection from '@components/features/CapabilitySection.vue';
import TechSpecs from '@components/features/TechSpecs.vue';
import RelatedContent from '@components/features/RelatedContent.vue';

// Icon paths (Heroicons)
const icons = {
  key: 'M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z',
  desktop: 'M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z',
  search: 'M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z',
  shield: 'M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z',
  cog: 'M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z',
  adjustments: 'M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4',
  lightbulb: 'M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'
};

// Navigation items
const navItems = [
  { id: 'overview', label: 'Overview' },
  { id: 'capabilities', label: 'Capabilities' },
  { id: 'specs', label: 'Tech Specs' },
  { id: 'resources', label: 'Resources' }
];

// Capability 1: API Key Management features
const apiKeyFeatures = [
  '<strong>Anthropic API:</strong> Claude models access',
  '<strong>OpenAI API:</strong> GPT-4 and embedding models',
  '<strong>Google AI:</strong> Gemini model access',
  '<strong>Local Encryption:</strong> Keys never leave your device',
  '<strong>Validation:</strong> Test keys before saving'
];

// Capability 2: Model Defaults features
const modelFeatures = [
  '<strong>Default Provider:</strong> Anthropic, OpenAI, Google, Mistral',
  '<strong>Temperature:</strong> Control response creativity',
  '<strong>Max Tokens:</strong> Limit response length',
  '<strong>Presets:</strong> Fast & Cheap, Balanced, Quality First'
];

// Capability 3: Search & RAG features
const searchFeatures = [
  '<strong>Hybrid Search:</strong> Semantic + keyword weighting',
  '<strong>Chunk Count:</strong> Retrieved context amount',
  '<strong>Similarity Threshold:</strong> Relevance filtering',
  '<strong>Reranking:</strong> Result quality optimization'
];

// Capability 4: Privacy & Data features
const privacyFeatures = [
  '<strong>Local-First:</strong> Data stored on your device',
  '<strong>Export Data:</strong> Backup workspaces and settings',
  '<strong>Clear History:</strong> Remove chat and search logs',
  '<strong>Reset All:</strong> Factory reset option'
];

// Tech specs
const techSpecs = [
  {
    category: 'API Providers',
    icon: icons.key,
    color: 'violet',
    items: [
      '<strong>Anthropic</strong> - Claude 3.5 Sonnet, Haiku, Opus',
      '<strong>OpenAI</strong> - GPT-4o, GPT-4 Turbo, o1',
      '<strong>Google</strong> - Gemini Pro, Flash',
      '<strong>Mistral</strong> - Large, Medium, Small'
    ]
  },
  {
    category: 'Model Settings',
    icon: icons.adjustments,
    color: 'blue',
    items: [
      '<strong>Temperature</strong> - 0.0 to 1.0 range',
      '<strong>Max Tokens</strong> - Up to model limit',
      '<strong>Top P</strong> - Nucleus sampling',
      '<strong>Fallback</strong> - Automatic model switching'
    ]
  },
  {
    category: 'Privacy Controls',
    icon: icons.shield,
    color: 'teal',
    items: [
      '<strong>Local Storage</strong> - IndexedDB encryption',
      '<strong>No Telemetry</strong> - Usage data stays local',
      '<strong>Export Format</strong> - JSON backup files',
      '<strong>Secure Delete</strong> - Complete data removal'
    ]
  }
];

// Related content
const journeys = [
  {
    title: 'Configuring Settings',
    description: 'Set up API keys, model defaults, and preferences',
    href: '/blog/journey-configure-settings'
  },
  {
    title: 'Managing API Keys',
    description: 'Add, validate, and rotate your provider keys',
    href: '/blog/journey-configure-settings'
  },
  {
    title: 'Privacy Controls',
    description: 'Manage data storage and export options',
    href: '/blog/journey-configure-settings'
  }
];

const docs = [
  {
    title: 'Settings API Reference',
    description: 'Complete API documentation for settings management',
    href: '/docs/api/settings'
  },
  {
    title: 'API Key Setup Guide',
    description: 'How to obtain and configure provider API keys',
    href: '/docs/features/settings'
  }
];
---

<Layout
  title="Settings - Your Control Center | Lattice"
  description="Configure API keys, model defaults, search settings, and privacy controls. Personalize Lattice to match your workflow and security requirements."
  keywords="API key management, model settings, privacy controls, search configuration, customization, security"
>
  <Header client:load />

  <main>
    <!-- Sticky Navigation -->
    <StickyNav
      client:load
      featureName="Settings"
      navItems={navItems}
      buyButtonText="Get Lattice"
      buyButtonHref="/#pricing"
      testId="settings-nav"
    />

    <!-- Hero Section -->
    <section id="overview">
      <FeatureHero
        client:load
        headline="Your Control Center."
        tagline="Configure Secure Personalize"
        description="Settings give you complete control over Lattice: manage API keys, set model defaults, configure search behavior, and control your privacy. Everything stays on your device."
        productImage="/images/journeys/configure-settings/configure-settings-01.png"
        productImageAlt="Lattice Settings panel showing API Key management with Anthropic, OpenAI, and Google providers"
        browserUrl="lattice.app/settings"
        colorScheme="violet"
        primaryCTA="Get Lattice"
        primaryHref="/#pricing"
        secondaryCTA="View docs"
        secondaryHref="/docs/features/settings"
        testId="settings-hero"
      />
    </section>

    <!-- Capabilities Section -->
    <section id="capabilities">
      <!-- API Key Management -->
      <CapabilitySection
        client:load
        title="API Key Management"
        description="Securely store and manage your API keys for different LLM providers. Keys are encrypted and stored locallyâ€”never sent to our servers."
        features={apiKeyFeatures}
        image="/images/journeys/configure-settings/configure-settings-02.png"
        imageAlt="API Key management showing provider list with validation status"
        icon={icons.key}
        iconColor="violet"
        imagePosition="left"
        background="white"
        showBrowserFrame={true}
        journeyLink="/blog/journey-configure-settings"
        journeyLinkText="Configure your API keys"
        testId="settings-apikeys"
      />

      <!-- Model Defaults -->
      <CapabilitySection
        client:load
        title="Model Defaults"
        description="Set your preferred default model and generation parameters. Choose between Fast & Cheap, Balanced, or Quality First presets for different use cases."
        features={modelFeatures}
        image="/images/journeys/configure-settings/configure-settings-03.png"
        imageAlt="Model defaults configuration with provider selection and temperature slider"
        icon={icons.desktop}
        iconColor="blue"
        imagePosition="right"
        background="gray"
        showBrowserFrame={true}
        showGlow={true}
        journeyLink="/blog/journey-configure-settings"
        journeyLinkText="Set model preferences"
        testId="settings-models"
      />

      <!-- Search & RAG Settings -->
      <CapabilitySection
        client:load
        title="Search & RAG Settings"
        description="Configure how Lattice searches your sources and retrieves relevant context. Fine-tune the balance between semantic and keyword search."
        features={searchFeatures}
        image="/images/journeys/configure-settings/configure-settings-04.png"
        imageAlt="Search settings with hybrid search weight slider and chunk count"
        icon={icons.search}
        iconColor="teal"
        imagePosition="left"
        background="white"
        showBrowserFrame={true}
        journeyLink="/blog/journey-configure-settings"
        journeyLinkText="Optimize search settings"
        testId="settings-search"
      />

      <!-- Privacy & Data -->
      <CapabilitySection
        client:load
        title="Privacy & Data"
        description="Control your data and privacy settings. All data is stored locally on your device. Export, backup, or clear your data at any time."
        features={privacyFeatures}
        image="/images/journeys/configure-settings/configure-settings-05.png"
        imageAlt="Privacy settings with data export and clear options"
        icon={icons.shield}
        iconColor="amber"
        imagePosition="right"
        background="gray"
        showBrowserFrame={true}
        journeyLink="/blog/journey-configure-settings"
        journeyLinkText="Manage privacy settings"
        testId="settings-privacy"
      />
    </section>

    <!-- Tech Specs Section -->
    <section id="specs">
      <TechSpecs
        client:load
        title="Technical Specifications"
        description="Everything you need to know about settings configuration and security in Lattice."
        icon={icons.cog}
        iconColor="violet"
        specs={techSpecs}
        columns={3}
        background="white"
        docsLink="/docs/features/settings"
        docsLinkText="View full documentation"
        testId="settings-specs"
      />
    </section>

    <!-- Related Resources Section -->
    <section id="resources">
      <RelatedContent
        client:load
        title="Learn More About Settings"
        description="Explore guides and documentation to customize your Lattice experience."
        journeys={journeys}
        docs={docs}
        background="gray"
        ctaLink="/docs/features/settings"
        ctaText="View Settings documentation"
        testId="settings-resources"
      />
    </section>

    <!-- CTA Section -->
    <section class="py-16 bg-gradient-to-r from-violet-600 to-purple-600">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-bold text-white mb-4">
          Customize Your Workflow
        </h2>
        <p class="text-xl text-white/80 mb-8 max-w-2xl mx-auto">
          Configure Lattice to match your preferences and security requirements.
        </p>
        <a
          href="/#pricing"
          class="inline-flex items-center px-8 py-4 bg-white text-violet-600 font-semibold rounded-xl hover:bg-gray-100 transition-colors"
          data-testid="settings-cta-button"
        >
          Get Lattice for $99
        </a>
      </div>
    </section>
  </main>

  <Footer client:load />
</Layout>
