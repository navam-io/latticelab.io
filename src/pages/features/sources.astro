---
import Layout from '@layouts/Layout.astro';
import Header from '@components/Header.vue';
import Footer from '@components/Footer.vue';
import StickyNav from '@components/features/StickyNav.vue';
import FeatureHero from '@components/features/FeatureHero.vue';
import CapabilitySection from '@components/features/CapabilitySection.vue';
import TechSpecs from '@components/features/TechSpecs.vue';
import RelatedContent from '@components/features/RelatedContent.vue';

// Icon paths (Heroicons)
const icons = {
  upload: 'M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12',
  search: 'M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z',
  link: 'M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1',
  lightning: 'M13 10V3L4 14h7v7l9-11h-7z',
  document: 'M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z',
  cloud: 'M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z',
  database: 'M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4'
};

// Navigation items
const navItems = [
  { id: 'overview', label: 'Overview' },
  { id: 'capabilities', label: 'Capabilities' },
  { id: 'specs', label: 'Tech Specs' },
  { id: 'resources', label: 'Resources' }
];

// Capability 1: Multi-Source Ingestion features
const ingestionFeatures = [
  '<strong>PDF Documents:</strong> Upload technical papers, whitepapers, and documentation',
  '<strong>Web URLs:</strong> Import pricing pages, model cards, and vendor docs',
  '<strong>GitHub Repos:</strong> Connect to README files and documentation',
  '<strong>YouTube:</strong> Index video transcripts for technical talks',
  '<strong>Google Docs:</strong> Import directly from your Drive (v0.6.2+)'
];

// Capability 2: Hybrid Search features
const searchFeatures = [
  'Vector <strong>embeddings</strong> for semantic understanding',
  'Keyword matching for exact terms and <strong>model names</strong>',
  'Cross-source discovery of <strong>related content</strong>',
  'Configurable <strong>relevance scoring</strong>'
];

// Capability 3: Citation Tracking features
const citationFeatures = [
  'Numbered <strong>inline citations</strong> in AI responses',
  'Click to expand and see <strong>source context</strong>',
  'Track decision provenance back to <strong>authoritative docs</strong>',
  '<strong>Verify claims</strong> with one click'
];

// Capability 4: Real-time Indexing features
const indexingFeatures = [
  'Live <strong>indexing progress</strong> indicators',
  'Chunk count displayed <strong>per source</strong>',
  'Automatic <strong>embedding generation</strong>',
  '<strong>Re-index</strong> on content updates'
];

// Tech specs
const techSpecs = [
  {
    category: 'Supported Formats',
    icon: icons.document,
    color: 'violet',
    items: [
      '<strong>PDF</strong> - Technical papers, whitepapers',
      '<strong>DOCX/DOC</strong> - Word documents',
      '<strong>TXT/MD</strong> - Plain text, Markdown',
      '<strong>HTML</strong> - Web pages via URL',
      '<strong>JSON</strong> - Structured data files'
    ]
  },
  {
    category: 'Cloud Integrations',
    icon: icons.cloud,
    color: 'blue',
    items: [
      '<strong>Google Docs</strong> - Drive integration',
      '<strong>GitHub</strong> - Repos and READMEs',
      '<strong>YouTube</strong> - Video transcripts',
      '<strong>Web URLs</strong> - Any public page'
    ]
  },
  {
    category: 'Processing',
    icon: icons.database,
    color: 'teal',
    items: [
      'Automatic <strong>chunking</strong> with overlap',
      'Vector <strong>embeddings</strong> via OpenAI/local',
      '<strong>Hybrid search</strong> indexing',
      'Real-time <strong>progress</strong> tracking'
    ]
  }
];

// Related content
const journeys = [
  {
    title: 'Adding Sources to Your Workspace',
    description: 'Learn how to import PDFs, URLs, GitHub repos, and more',
    href: '/blog/journey-add-sources'
  },
  {
    title: 'Browsing Your Knowledge Base',
    description: 'Navigate and search your indexed sources',
    href: '/blog/journey-browse-sources'
  },
  {
    title: 'Viewing Source Details',
    description: 'Inspect chunks, metadata, and citations',
    href: '/blog/journey-view-source'
  }
];

const docs = [
  {
    title: 'Sources API Reference',
    description: 'Complete API documentation for source management',
    href: '/docs/api/overview'
  },
  {
    title: 'Supported Formats Guide',
    description: 'All file types and integrations supported',
    href: '/docs/features/sources'
  }
];
---

<Layout
  title="Sources - Knowledge Management | Lattice"
  description="Multi-source knowledge ingestion with PDFs, URLs, GitHub, YouTube, and Google Docs. Hybrid semantic search with citation tracking."
  keywords="knowledge management, source ingestion, PDF indexing, semantic search, citation tracking, RAG sources"
>
  <Header client:load />

  <main>
    <!-- Sticky Navigation -->
    <StickyNav
      client:load
      featureName="Sources"
      navItems={navItems}
      buyButtonText="Get Lattice"
      buyButtonHref="/#pricing"
      testId="sources-nav"
    />

    <!-- Hero Section -->
    <section id="overview">
      <FeatureHero
        client:load
        headline="Your Knowledge. Unified."
        tagline="Personal Private Powerful"
        description="Build a curated knowledge base from PDFs, URLs, GitHub repos, YouTube transcripts, and Google Docs. Every AI recommendation links back to specific source chunks you can verify."
        productImage="/images/journeys/view-source/view-source-03.png"
        productImageAlt="Lattice Sources panel showing document reader with code examples and metadata"
        browserUrl="lattice.app/sources"
        colorScheme="violet"
        primaryCTA="Get Lattice"
        primaryHref="/#pricing"
        secondaryCTA="View docs"
        secondaryHref="/docs/features/sources"
        testId="sources-hero"
      />
    </section>

    <!-- Capabilities Section -->
    <section id="capabilities">
      <!-- Multi-Source Ingestion -->
      <CapabilitySection
        client:load
        title="Multi-Source Ingestion"
        description="Add knowledge from multiple source types. Lattice handles the chunking, embedding, and indexing automatically."
        features={ingestionFeatures}
        image="/images/journeys/add-sources/add-sources-02.png"
        imageAlt="Adding sources to Lattice workspace"
        icon={icons.upload}
        iconColor="violet"
        imagePosition="left"
        background="white"
        showBrowserFrame={true}
        journeyLink="/blog/journey-add-sources"
        journeyLinkText="Learn to add sources"
        testId="sources-ingestion"
      />

      <!-- Hybrid Search -->
      <CapabilitySection
        client:load
        title="Hybrid Semantic Search"
        description="Find relevant content across all your sources with a combination of semantic similarity and keyword matching."
        features={searchFeatures}
        image="/images/journeys/browse-sources/browse-sources-01.png"
        imageAlt="Searching sources in Lattice"
        icon={icons.search}
        iconColor="blue"
        imagePosition="right"
        background="gray"
        showBrowserFrame={true}
        journeyLink="/blog/journey-browse-sources"
        journeyLinkText="Explore search features"
        testId="sources-search"
      />

      <!-- Citation Tracking -->
      <CapabilitySection
        client:load
        title="Citation Tracking"
        description="Every AI recommendation includes numbered citations linking back to specific chunks in your sources. Verify claims with one click."
        features={citationFeatures}
        image="/images/journeys/view-source/view-source-03.png"
        imageAlt="Citation tracking in Lattice"
        icon={icons.link}
        iconColor="teal"
        imagePosition="left"
        background="white"
        showBrowserFrame={true}
        showGlow={true}
        journeyLink="/blog/journey-view-source"
        journeyLinkText="See citation details"
        testId="sources-citations"
      />

      <!-- Real-time Indexing -->
      <CapabilitySection
        client:load
        title="Real-time Indexing"
        description="Watch your sources get processed in real-time. See chunk counts and indexing progress as content becomes searchable."
        features={indexingFeatures}
        icon={icons.lightning}
        iconColor="amber"
        imagePosition="right"
        background="gray"
        showPlaceholder={true}
        testId="sources-indexing"
      />
    </section>

    <!-- Tech Specs Section -->
    <section id="specs">
      <TechSpecs
        client:load
        title="Technical Specifications"
        description="Everything you need to know about Sources panel capabilities and supported formats."
        icon={icons.document}
        iconColor="violet"
        specs={techSpecs}
        columns={3}
        background="white"
        docsLink="/docs/features/sources"
        docsLinkText="View full documentation"
        testId="sources-specs"
      />
    </section>

    <!-- Related Resources Section -->
    <section id="resources">
      <RelatedContent
        client:load
        title="Learn More About Sources"
        description="Explore guides and documentation to get the most out of the Sources panel."
        journeys={journeys}
        docs={docs}
        background="gray"
        ctaLink="/docs/features/sources"
        ctaText="View Sources documentation"
        testId="sources-resources"
      />
    </section>

    <!-- CTA Section -->
    <section class="py-16 bg-gradient-to-r from-violet-600 to-blue-600">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-bold text-white mb-4">
          Build Your AI Knowledge Base
        </h2>
        <p class="text-xl text-white/80 mb-8 max-w-2xl mx-auto">
          Start adding sources and get grounded recommendations with full citations.
        </p>
        <a
          href="/#pricing"
          class="inline-flex items-center px-8 py-4 bg-white text-violet-600 font-semibold rounded-xl hover:bg-gray-100 transition-colors"
          data-testid="sources-cta-button"
        >
          Get Lattice for $99
        </a>
      </div>
    </section>
  </main>

  <Footer client:load />
</Layout>
