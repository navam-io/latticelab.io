---
import { siteConfig, mainNav } from '@/lib/constants';
import Button from '@/components/ui/Button.astro';
import Navigation from './Navigation.astro';
import MobileMenu from './MobileMenu';
---

<header
  class="fixed top-0 left-0 right-0 z-50 border-b border-border/50 bg-background/80 backdrop-blur-lg"
  data-testid="header"
>
  <div class="mx-auto flex h-16 max-w-screen-xl items-center justify-between px-4 sm:px-6 lg:px-8">
    <!-- Logo -->
    <a
      href="/"
      class="flex items-center gap-2 text-lg font-semibold text-foreground transition-opacity hover:opacity-80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 rounded-md"
      data-testid="logo"
    >
      <svg
        class="h-8 w-8 text-accent"
        viewBox="0 0 32 32"
        fill="currentColor"
        aria-hidden="true"
      >
        <path d="M16 2L4 9v14l12 7 12-7V9L16 2zm0 4l8 4.67v9.33L16 25l-8-5V10.67L16 6z" />
        <path d="M16 10l-4 2.33v4.67L16 20l4-3V12.33L16 10z" opacity="0.6" />
      </svg>
      <span>{siteConfig.name}</span>
    </a>

    <!-- Desktop Navigation -->
    <Navigation items={mainNav} />

    <!-- Desktop CTA -->
    <div class="hidden md:flex items-center gap-3">
      <Button variant="primary" size="sm" href="/pricing" data-testid="header-cta">
        Buy Lattice
      </Button>
    </div>

    <!-- Mobile Menu -->
    <div class="md:hidden">
      <MobileMenu items={mainNav} client:load />
    </div>
  </div>
</header>

<!-- Spacer to prevent content from going under fixed header -->
<div class="h-16" aria-hidden="true"></div>
