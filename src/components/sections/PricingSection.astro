---
/**
 * PricingSection Component
 *
 * Displays prominent $99 one-time pricing with benefit-driven features list,
 * Stripe Buy Button placeholder, and FUDs reduction below CTA.
 * CRO: Clear pricing, FUDs reduction, guarantee prominently displayed.
 */
import Section from '@/components/ui/Section.astro';
import Container from '@/components/ui/Container.astro';
import Card from '@/components/ui/Card.astro';
import Button from '@/components/ui/Button.astro';
import FUDsReduction from '@/components/ui/FUDsReduction.astro';

interface BenefitItem {
  text: string;
  highlight?: boolean;
}

const benefits: BenefitItem[] = [
  { text: 'Lifetime access to Lattice Lab', highlight: true },
  { text: 'All 36 vendor blueprint bundles included' },
  { text: 'Private GitHub repository access' },
  { text: 'Self-hosted on your infrastructure' },
  { text: 'Deploy anywhere: laptop, cloud, air-gapped' },
  { text: 'All future updates included' },
];

const trustSignals = [
  { icon: 'server', text: 'Self-hosted' },
  { icon: 'lock', text: 'Private repo access' },
  { icon: 'globe', text: 'Deploy anywhere' },
];
---

<Section spacing="lg" background="muted" data-testid="pricing-section">
  <Container size="lg">
    <!-- Section Header -->
    <div class="mx-auto max-w-3xl text-center">
      <span
        class="mb-4 inline-block text-sm font-semibold uppercase tracking-wider text-accent"
        data-testid="pricing-eyebrow"
      >
        Simple Pricing
      </span>
      <h2
        class="mb-4 text-3xl font-bold tracking-tight text-foreground sm:text-4xl"
        data-testid="pricing-headline"
      >
        One Price. Lifetime Access. No Subscriptions.
      </h2>
      <p class="text-lg text-muted-foreground" data-testid="pricing-subhead">
        Pay once, own forever. No recurring fees, no usage limits, no vendor lock-in.
      </p>
    </div>

    <!-- Pricing Card -->
    <div class="mx-auto mt-12 max-w-xl">
      <Card padding="lg" variant="elevated" class="relative overflow-hidden" data-testid="pricing-card">
        <!-- Popular badge -->
        <div
          class="absolute right-0 top-0 rounded-bl-lg bg-accent px-3 py-1 text-xs font-semibold text-accent-foreground"
          data-testid="pricing-badge"
        >
          Most Popular
        </div>

        <!-- Price Display -->
        <div class="mb-8 text-center" data-testid="pricing-display">
          <div class="flex items-baseline justify-center gap-2">
            <span class="text-5xl font-bold text-foreground sm:text-6xl" data-testid="price-amount">
              $99
            </span>
            <span class="text-lg text-muted-foreground" data-testid="price-label">
              one-time
            </span>
          </div>
          <p class="mt-2 text-sm text-muted-foreground" data-testid="price-subtitle">
            No subscriptions. No hidden fees.
          </p>
        </div>

        <!-- Benefits List -->
        <ul class="mb-8 space-y-3" data-testid="benefits-list">
          {
            benefits.map((benefit, index) => (
              <li
                class={`flex items-start gap-3 ${benefit.highlight ? 'text-foreground font-medium' : 'text-muted-foreground'}`}
                data-testid={`benefit-item-${index}`}
              >
                <svg
                  class="mt-0.5 h-5 w-5 flex-shrink-0 text-success"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 13l4 4L19 7"
                  />
                </svg>
                <span>{benefit.text}</span>
              </li>
            ))
          }
        </ul>

        <!-- CTA Button Placeholder -->
        <div class="mb-6" data-testid="pricing-cta-container">
          <!-- Stripe Buy Button will go here -->
          <!--
            Stripe Buy Button Integration (Feature Slice 31):
            <script async src="https://js.stripe.com/v3/buy-button.js"></script>
            <stripe-buy-button
              buy-button-id="buy_btn_1SYXbwRCxnzBPkIXayfIahbD"
              publishable-key="pk_live_..."
            ></stripe-buy-button>
          -->
          <Button
            variant="primary"
            size="lg"
            href="/pricing"
            class="w-full justify-center"
            data-testid="pricing-cta"
          >
            Get Lattice Now
          </Button>
        </div>

        <!-- FUDs Reduction -->
        <div class="flex justify-center" data-testid="pricing-fuds">
          <FUDsReduction />
        </div>
      </Card>
    </div>

    <!-- Trust Signals -->
    <div class="mt-10 flex flex-wrap items-center justify-center gap-6" data-testid="pricing-trust-signals">
      {
        trustSignals.map((signal, index) => (
          <div
            class="flex items-center gap-2 text-sm text-muted-foreground"
            data-testid={`trust-signal-${index}`}
          >
            <svg
              class="h-5 w-5 text-accent"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              {signal.icon === 'server' && (
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"
                />
              )}
              {signal.icon === 'lock' && (
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
                />
              )}
              {signal.icon === 'globe' && (
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              )}
            </svg>
            <span>{signal.text}</span>
          </div>
        ))
      }
    </div>
  </Container>
</Section>
