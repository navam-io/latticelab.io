---
import Section from '@/components/ui/Section.astro';
import Container from '@/components/ui/Container.astro';
import Button from '@/components/ui/Button.astro';
import LogoBar from '@/components/ui/LogoBar.astro';
import ReviewSnippet from '@/components/ui/ReviewSnippet.astro';
import FUDsReduction from '@/components/ui/FUDsReduction.astro';
import { siteConfig } from '@/lib/constants';

/**
 * Hero Section — CRO Optimized (Feature Slice 7)
 *
 * Above-the-fold optimization following the 5-second rule:
 * - Benefit-driven headline (6-8 words max)
 * - Sub-headline with USP
 * - Social proof (2 forms minimum): LogoBar + ReviewSnippet
 * - Clear CTA with FUDs reduction underneath
 * - Visual/screenshot that complements messaging
 */

export interface Props {
  headline?: string;
  subhead?: string;
  primaryCta?: {
    text: string;
    href: string;
  };
  secondaryCta?: {
    text: string;
    href: string;
  };
}

const {
  // CRO: Benefit-driven headline, 6 words
  headline = 'Stop Researching AI. Start Deciding.',
  // CRO: Sub-headline with USP - explains what + differentiator
  subhead = 'Lattice synthesizes pricing, benchmarks, and model cards into grounded recommendations with citations. Self-hosted, privacy-first.',
  primaryCta = {
    text: 'Buy Lattice — $99',
    href: '/pricing',
  },
  secondaryCta = {
    text: 'View Features',
    href: '/features',
  },
} = Astro.props;
---

<Section spacing="xl" container={false} data-testid="hero-section">
  <Container size="xl">
    <div class="grid min-h-[calc(100vh-12rem)] items-center gap-12 lg:grid-cols-2 lg:gap-16">
      <!-- Text Content -->
      <div class="flex flex-col justify-center text-center lg:text-left">
        <!-- Tagline Badge -->
        <div class="mb-6 flex justify-center lg:justify-start">
          <span
            class="inline-flex items-center gap-2 rounded-full border border-border bg-surface-2 px-4 py-1.5 text-sm font-medium text-muted-foreground"
            data-testid="hero-tagline"
          >
            <span class="h-2 w-2 rounded-full bg-accent"></span>
            Agentic AI Lab Assistant for Research Engineers
          </span>
        </div>

        <!-- Site Name -->
        <h1
          class="mb-4 text-4xl font-bold tracking-tight text-foreground sm:text-5xl md:text-6xl lg:text-7xl"
          data-testid="hero-headline"
        >
          {siteConfig.name}
        </h1>

        <!-- CRO: Benefit-Driven Value Proposition (6-8 words) -->
        <p
          class="mb-4 text-xl font-semibold text-foreground sm:text-2xl md:text-3xl"
          data-testid="hero-value-prop"
        >
          {headline}
        </p>

        <!-- CRO: Sub-headline with USP -->
        <p
          class="mb-6 max-w-xl text-base text-muted-foreground sm:text-lg lg:max-w-none"
          data-testid="hero-subhead"
        >
          {subhead}
        </p>

        <!-- CRO: Social Proof Above the Fold (Form 1: Review Snippet) -->
        <div class="mb-6 flex justify-center lg:justify-start" data-testid="hero-social-proof">
          <ReviewSnippet
            rating={5}
            quote="Saved us weeks of research"
            source="Engineering Lead"
          />
        </div>

        <!-- CTA Buttons -->
        <div
          class="mb-4 flex flex-col gap-4 sm:flex-row sm:justify-center lg:justify-start"
          data-testid="hero-ctas"
        >
          <Button
            variant="primary"
            size="lg"
            href={primaryCta.href}
            data-testid="hero-primary-cta"
            data-track="cta"
            data-track-name="Hero Primary CTA"
          >
            {primaryCta.text}
          </Button>
          <Button
            variant="secondary"
            size="lg"
            href={secondaryCta.href}
            data-testid="hero-secondary-cta"
            data-track="cta"
            data-track-name="Hero Secondary CTA"
          >
            {secondaryCta.text}
          </Button>
        </div>

        <!-- CRO: FUDs Reduction Under CTA (40-60% conversion lift) -->
        <div class="mb-8" data-testid="hero-fuds">
          <FUDsReduction />
        </div>

        <!-- CRO: Social Proof Above the Fold (Form 2: Trust Signals) -->
        <div data-testid="hero-trust-signals">
          <LogoBar
            label="Why teams choose Lattice"
            signals={[
              { name: 'Self-Hosted', quote: 'Deploy on your infrastructure' },
              { name: 'Privacy-First', quote: 'Data never leaves your machine' },
              { name: 'Citations', quote: 'Every recommendation grounded' },
            ]}
          />
        </div>
      </div>

      <!-- Product Screenshot -->
      <div class="flex items-center justify-center lg:justify-end">
        <div
          class="relative aspect-[4/3] w-full max-w-lg overflow-hidden rounded-xl border border-border bg-surface-2 shadow-lg lg:max-w-none"
          data-testid="hero-screenshot"
        >
          <picture>
            <source srcset="/images/screenshots/hero/hero-main.webp" type="image/webp" />
            <img
              src="/images/screenshots/hero/hero-main.png"
              alt="Lattice Lab interface showing AI-powered research with Sources panel, Lab chat, and Studio artifacts"
              class="h-full w-full object-cover"
              loading="eager"
              decoding="async"
              width="1200"
              height="900"
            />
          </picture>
          <!-- Gradient overlay for polish -->
          <div class="pointer-events-none absolute inset-0 bg-gradient-to-tr from-accent/5 via-transparent to-transparent"></div>
        </div>
      </div>
    </div>
  </Container>
</Section>
