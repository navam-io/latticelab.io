---
/**
 * SocialProof Section
 *
 * Displays verifiable testimonials with photo, name, role, company, and source.
 * CRO: Testimonials are NOT in a carousel - displayed inline for forced consumption.
 * Currently shows placeholder structure ready for real testimonials.
 */
import Section from '@/components/ui/Section.astro';
import Container from '@/components/ui/Container.astro';
import Card from '@/components/ui/Card.astro';
import FeaturedOn from '@/components/ui/FeaturedOn.astro';

interface Testimonial {
  id: string;
  quote: string;
  name: string;
  role: string;
  company: string;
  source: string;
  photoPlaceholder: string; // Initials for placeholder
}

// Placeholder testimonials - structure ready for real verifiable testimonials
const testimonials: Testimonial[] = [
  {
    id: 'testimonial-1',
    quote:
      'We evaluated 12 LLM providers in 3 days instead of 3 weeks. The citation trail meant our CTO could verify every claim.',
    name: 'Sarah Chen',
    role: 'Senior ML Engineer',
    company: 'Series B Startup',
    source: 'via Product Hunt',
    photoPlaceholder: 'SC',
  },
  {
    id: 'testimonial-2',
    quote:
      'Finally, a tool that respects our air-gapped requirements. Everything runs locally, and the blueprints saved us from starting from scratch.',
    name: 'Marcus Rodriguez',
    role: 'Platform Lead',
    company: 'Enterprise FinTech',
    source: 'via LinkedIn',
    photoPlaceholder: 'MR',
  },
  {
    id: 'testimonial-3',
    quote:
      'The board presentation practically wrote itself. Lattice gave us comparison tables with sources our CFO could actually check.',
    name: 'Jennifer Park',
    role: 'VP of Engineering',
    company: 'Healthcare AI Company',
    source: 'via Twitter',
    photoPlaceholder: 'JP',
  },
];
---

<Section spacing="lg" data-testid="social-proof-section">
  <Container size="xl">
    <!-- Section Header -->
    <div class="mx-auto max-w-3xl text-center">
      <span
        class="mb-4 inline-block text-sm font-semibold uppercase tracking-wider text-accent"
        data-testid="social-proof-eyebrow"
      >
        Trusted by Engineers
      </span>
      <h2
        class="mb-4 text-3xl font-bold tracking-tight text-foreground sm:text-4xl"
        data-testid="social-proof-headline"
      >
        Teams Ship Faster with Lattice
      </h2>
      <p class="text-lg text-muted-foreground" data-testid="social-proof-subhead">
        See how engineering teams use Lattice to make confident AI decisions.
      </p>
    </div>

    <!-- Testimonials Grid - NOT a carousel, displayed inline -->
    <div
      class="mt-12 grid gap-6 md:grid-cols-2 lg:grid-cols-3 max-w-full overflow-hidden"
      data-testid="testimonials-grid"
    >
      {
        testimonials.map((testimonial) => (
          <Card padding="md" class="flex flex-col sm:p-8" data-testid={testimonial.id}>
            {/* Quote */}
            <blockquote class="mb-6 flex-1">
              <p
                class="text-foreground leading-relaxed"
                data-testid={`${testimonial.id}-quote`}
              >
                "{testimonial.quote}"
              </p>
            </blockquote>

            {/* Attribution with verifiable structure */}
            <div class="flex items-center gap-4" data-testid={`${testimonial.id}-attribution`}>
              {/* Photo Placeholder */}
              <div
                class="flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-accent/20 text-sm font-semibold text-accent"
                data-testid={`${testimonial.id}-photo`}
                aria-label={`Photo of ${testimonial.name}`}
              >
                {testimonial.photoPlaceholder}
              </div>

              {/* Name, Role, Company */}
              <div class="flex-1 min-w-0">
                <p
                  class="font-semibold text-foreground truncate"
                  data-testid={`${testimonial.id}-name`}
                >
                  {testimonial.name}
                </p>
                <p
                  class="text-sm text-muted-foreground truncate"
                  data-testid={`${testimonial.id}-role`}
                >
                  {testimonial.role}, {testimonial.company}
                </p>
              </div>
            </div>

            {/* Source indicator for verifiability */}
            <div class="mt-4 pt-4 border-t border-border">
              <span
                class="text-xs text-muted-foreground"
                data-testid={`${testimonial.id}-source`}
              >
                {testimonial.source}
              </span>
            </div>
          </Card>
        ))
      }
    </div>

    <!-- Placeholder Notice (can be removed when real testimonials are added) -->
    <p
      class="mt-8 text-center text-xs text-muted-foreground"
      data-testid="testimonials-placeholder-notice"
    >
      * Representative testimonials. Real testimonials with verifiable details coming soon.
    </p>

    <!-- Featured On / Publication Logos -->
    <div class="mt-16 pt-16 border-t border-border">
      <FeaturedOn />
    </div>
  </Container>
</Section>
